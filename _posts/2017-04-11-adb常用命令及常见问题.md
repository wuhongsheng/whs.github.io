---
layout: post
title:  "adb常用命令及常见问题"
date:   2017-04-11 22:14:54
categories: Android
tags: Adb Android 
author: WHS
---

* content
{:toc}

自从换了Mac后adb经常出现问题（经验不足），所以写此篇记录一下常用的adb命令以及一些常见问题解决方法。






## 前提
要想在Mac或Windows上直接使用adb命令，需要配置环境变量，以Mac为例，配置方法如下：
* 打开终端输入 touch .bash_profile 更新配置文件，如果不存在自动创建
* open -e .bash_profile 打开配置文件
* 输入如下内容并保存
```
export PATH=${PATH}:/Users/{yourname}/Library/Android/sdk/platform-tools
export PATH=${PATH}:/Users/{yourname}/Library/Android/sdk/tools
```
### 常用命令
* adb nodaemon server   查看adb 端口是否有占用    
* lsof -i:5037 查看adb端口占用进程
* rm -rf ~/.android 重置本地签名文件
* killalladb 结束所有adb相关进程
* adb shell am start -W com.titan.asfh/com.titan.asfh.login.LoginActivity //测量应用的启动时间
* 未完待续……

---

## 可能出现的问题

### adb端口占用

**错误代码：**

```
Could not open Selected VM debug port (8700). Make sure you do not have another instance of DDMS or of the eclipse plugin running. If it's being used by something else, choose a new port number in the preferences.
```

**解决方法：**

* killall adb 然后 重启Android Studio
* 如果上面方法无效，请检查是否重复设置Android环境变量
* 还有可能是Chrome DevTools已连接设备 Chrome 打开 chrome://inspect/#devices checkout设备，然后kill-server and adb devices。
* open sdk manager and installed all android sdk tools and done.
* Mac防火墙设置原因
* 查看AS debugger 端口是否被占用 lsof -i:63341


**错误信息：**

```
$ adb devices
List of devices attached
* daemon not running. starting it now at tcp:5037 *
* daemon started successfully *
** daemon still not running
error: cannot connect to daemon at tcp:5037: Operation timed out
```
**解决方法：**
* Close Android Studio 然后使用终端kill 占用adb的进程，重启AS(如果还是不行请重新插拔设备)。

**错误信息：**

```
下午4:13	Can't bind to local 8617 for debugger

下午4:15	Can't bind to local 8617 for debugger

下午4:15	Can't bind to local 8617 for debugger

下午4:15	Can't bind to local 8606 for debugger
```


**解决方法：**

* 在Debugger Configuration 设置Debuger Type 为 Java
